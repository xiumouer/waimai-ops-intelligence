import{d as E,r as d,o as z,c as p,a as r,b as c,e,f as F,t as o,w as v,v as f,F as N,g as V,i as w,p as m,n as B,j as M}from"./index-CIa03AWP.js";const S={class:"card head full"},j={class:"subtext",style:{"font-size":"12px","margin-left":"8px"}},D={style:{"margin-left":"auto",display:"inline-flex",gap:"8px","align-items":"center"}},J={class:"list"},O=["onClick"],R={class:"li-left"},T={class:"subtext"},U={class:"li-right"},$=["onClick"],q=E({__name:"RidersPage",emits:["focus"],setup(L,{emit:h}){const g=h,i=d([]),a=d(""),l=d("");function u(){w("riders.json").then(t=>i.value=t).catch(()=>{})}z(()=>{u()});const x=p(()=>i.value.filter(t=>t.status==="在线").length),_=p(()=>i.value.length);function b(t){t.lng!=null&&t.lat!=null&&g("focus",[t.lng,t.lat])}function C(){!a.value||!l.value||m("rider-register",{name:a.value,phone:l.value}).then(()=>{a.value="",l.value="",u()}).catch(()=>{})}function k(t){t&&m("rider-delete",{name:t}).then(()=>{u()}).catch(()=>{})}return(t,n)=>(c(),r("div",S,[e("h3",null,[n[2]||(n[2]=F("骑手管理 ",-1)),e("span",j,"在线 "+o(x.value)+" / 总计 "+o(_.value),1),e("span",D,[v(e("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>a.value=s),placeholder:"姓名",style:{height:"28px","border-radius":"4px",border:"1px solid #E9ECEF",padding:"0 8px","font-size":"12px"}},null,512),[[f,a.value]]),v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>l.value=s),placeholder:"手机号",style:{height:"28px","border-radius":"4px",border:"1px solid #E9ECEF",padding:"0 8px","font-size":"12px"}},null,512),[[f,l.value]]),e("button",{class:"btn btn-sm",onClick:C},"登记")])]),e("div",J,[(c(!0),r(N,null,V(i.value,s=>(c(),r("div",{class:"list-item",key:s.name,onClick:y=>b(s)},[e("div",R,[e("div",null,o(s.name),1),e("div",T,"手机号 "+o(s.phone||"未登记"),1)]),e("div",U,[e("span",{class:B(["tag",s.status==="在线"?"tag-success":"tag-muted"])},o(s.status),3),e("button",{class:"btn btn-sm",style:{"margin-left":"8px"},onClick:M(y=>k(s.name),["stop"])},"删除",8,$)])],8,O))),128))])]))}});export{q as default};
