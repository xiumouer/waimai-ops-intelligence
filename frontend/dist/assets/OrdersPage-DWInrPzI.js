import{d as w,r as h,c as E,o as O,a as l,b as a,e as t,f as N,w as $,v as A,F as d,g as m,h as B,i as F,n as c,t as r}from"./index-CIa03AWP.js";const S={class:"card head full"},V={style:{"margin-left":"auto",display:"inline-flex",gap:"8px","align-items":"center"}},z={class:"table"},D=["onClick"],J={class:"card full"},M={class:"list"},R=["onClick"],j=w({__name:"OrdersPage",props:{riders:{},alerts:{},orders:{}},emits:["focus"],setup(f,{emit:v}){const i=f,p=v,o=h([]),u=h(""),y=E(()=>{const n=u.value.trim();if(!n)return o.value;const s=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");return o.value.filter(e=>s.test(e.id)||s.test(e.rider)||s.test(e.status))});function g(){B("orders.json",3,400).then(n=>o.value=n).catch(()=>{})}O(()=>{Array.isArray(i.orders)&&i.orders.length?o.value=i.orders:g()});function x(n){const s=i.riders.find(e=>e.name===n.rider);s&&p("focus",s.pos)}function k(n){p("focus",n.pos)}function _(n){return n==="配送中"?"tag-success":n==="延迟"?"tag-warning":n==="待取餐"?"tag-info":"tag-muted"}function b(){F("generate-orders?count=100&hours=6").then(()=>{g()}).catch(()=>{})}return(n,s)=>(a(),l(d,null,[t("div",S,[t("h3",null,[s[1]||(s[1]=N("订单监控 ",-1)),t("span",{style:{"margin-left":"12px"}},[t("button",{class:"btn btn-sm",onClick:b},"生成样例订单(100)")]),t("span",V,[$(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),placeholder:"搜索订单/骑手",style:{height:"28px","border-radius":"4px",border:"1px solid #E9ECEF",padding:"0 8px","font-size":"12px"}},null,512),[[A,u.value]])])]),t("table",z,[s[2]||(s[2]=t("thead",null,[t("tr",null,[t("th",null,"订单号"),t("th",null,"骑手"),t("th",null,"状态"),t("th",null,"预计送达")])],-1)),t("tbody",null,[(a(!0),l(d,null,m(y.value,e=>(a(),l("tr",{key:e.id,onClick:C=>x(e),class:c({"row-warning":e.status==="延迟"})},[t("td",null,r(e.id),1),t("td",null,r(e.rider),1),t("td",null,[t("span",{class:c(["tag",_(e.status)])},r(e.status),3)]),t("td",null,r(e.eta),1)],10,D))),128))])])]),t("div",J,[s[3]||(s[3]=t("h3",null,"异常告警",-1)),t("div",M,[(a(!0),l(d,null,m(f.alerts,e=>(a(),l("div",{class:"list-item",key:e.key,onClick:C=>k(e)},[t("span",null,"["+r(e.type||"告警")+"] "+r(e.key),1),t("span",{class:c(["tag",e.type==="偏航"?"tag-danger":"tag-warning"])},r(e.type||"告警"),3)],8,R))),128))])])],64))}});export{j as default};
